# smash-inc.co.jp 公開手順書

## 📋 必要なもの
- [x] smash-inc.co.jp ドメイン（取得済み）
- [x] Xserverアカウント（契約済み）
- [ ] FTPソフト（FileZillaなど）※または、Xserverのファイルマネージャーでも可

---

## 🌐 ステップ1: メインサイト（smash-inc.co.jp）の公開

### 1-1. Xserverにログイン
1. [Xserverサーバーパネル](https://www.xserver.ne.jp/)にログイン
2. 対象のサーバーアカウントを選択

### 1-2. ドメイン設定の確認
1. サーバーパネルの「ドメイン設定」をクリック
2. `smash-inc.co.jp` が追加されているか確認
3. まだの場合は「ドメイン設定追加」から `smash-inc.co.jp` を追加

### 1-3. ファイルのアップロード

#### 方法A: FTPソフトを使う場合（推奨）

**FTP接続情報（Xserverサーバーパネルで確認）:**
- FTPホスト: `smash-inc.co.jp` または `sv〇〇〇〇.xserver.jp`
- FTPユーザー: サーバーパネルに記載
- FTPパスワード: サーバーパネルで設定したもの
- ポート: 21（通常）

**アップロード手順:**
1. FTPソフト（FileZilla等）で接続
2. リモート側の `/smash-inc.co.jp/public_html/` に移動
3. 以下のファイル・フォルダをアップロード:
   ```
   index.html
   news-detail.html
   style.css
   assets/（フォルダごと）
   ```

#### 方法B: Xserverファイルマネージャーを使う場合

1. サーバーパネルの「ファイルマネージャー」をクリック
2. `/smash-inc.co.jp/public_html/` に移動
3. 「アップロード」ボタンから上記ファイルを選択してアップロード

### 1-4. 動作確認
1. ブラウザで `https://smash-inc.co.jp` にアクセス
2. トップページが表示されることを確認
3. **注意**: この時点ではNewsセクションは空またはエラー表示（WordPress未設置のため）

---

## 📰 ステップ2: WordPress（news.smash-inc.co.jp）の設置

### 2-1. サブドメインの追加
1. Xserverサーバーパネルの「サブドメイン設定」をクリック
2. 「サブドメイン設定追加」タブを選択
3. サブドメイン名: `news`
4. 対象ドメイン: `smash-inc.co.jp`
5. 「確認画面へ進む」→「追加する」

### 2-2. WordPressのインストール
1. サーバーパネルの「WordPress簡単インストール」をクリック
2. 対象ドメイン: `news.smash-inc.co.jp` を選択
3. 「WordPressインストール」タブで以下を入力:
   - サイトURL: `https://news.smash-inc.co.jp`（スラッシュ以降は空欄）
   - ブログ名: `SMASH News`（任意）
   - ユーザー名: 任意（管理画面ログイン用）
   - パスワード: 任意（管理画面ログイン用）
   - メールアドレス: 管理用アドレス
4. 「確認画面へ進む」→「インストールする」
5. 完了後、管理画面URL（`https://news.smash-inc.co.jp/wp-admin/`）をメモ

### 2-3. WordPress側の設定

#### ログイン
1. `https://news.smash-inc.co.jp/wp-admin/` にアクセス
2. 設定したユーザー名とパスワードでログイン

#### パーマリンク設定
1. 左メニューの「設定」→「パーマリンク」
2. 「投稿名」を選択
3. 「変更を保存」

#### 検索エンジンのブロック（推奨）
News用WordPressは投稿内容をAPIで提供するだけなので、検索エンジンにインデックスされないようにします。

1. 左メニューの「設定」→「表示設定」
2. 「検索エンジンがサイトをインデックスしないようにする」にチェック
3. 「変更を保存」

#### テーマ・プラグイン（最小構成でOK）
- デフォルトテーマのまま使用可（表示されないため）
- 特別なプラグインは不要（REST APIは標準で有効）

### 2-4. 記事投稿のテスト
1. 左メニューの「投稿」→「新規追加」
2. タイトルと本文を入力
3. アイキャッチ画像を設定（推奨）
4. 「公開」をクリック

### 2-5. REST APIの動作確認
ブラウザで以下のURLにアクセス:
```
https://news.smash-inc.co.jp/wp-json/wp/v2/posts
```
JSON形式で投稿データが返ってくればOK

---

## 🔗 ステップ3: 連携の確認

### 3-1. メインサイトでの表示確認
1. `https://smash-inc.co.jp` にアクセス
2. Newsセクションにスクロール
3. WordPressで投稿した記事が自動的に表示されることを確認

### 3-2. 記事詳細ページの確認
1. Newsセクションの記事カードをクリック
2. `news-detail.html?slug=記事スラッグ` に遷移
3. 記事の詳細が表示されることを確認

---

## 🔧 トラブルシューティング

### Newsが表示されない場合

#### 1. ブラウザの開発者ツールで確認
1. F12キーを押して開発者ツールを開く
2. 「Console」タブでエラーを確認

#### 2. CORS（クロスオリジン）エラーの対処
もしコンソールに「CORS」関連のエラーが出ている場合:

**方法1: .htaccess で対処（推奨）**

WordPress側（`/news.smash-inc.co.jp/public_html/`）の `.htaccess` に以下を追加:

```apache
# REST API の CORS 設定
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "https://smash-inc.co.jp"
    Header set Access-Control-Allow-Methods "GET, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type"
</IfModule>
```

**方法2: プラグインで対処**

WordPressに「WP REST API Controller」などのCORS設定プラグインをインストール

#### 3. URLの確認
`index.html` の67行目で、API URLが正しいか確認:
```html
<div class="news-track news-track--scroll fade-in-up" data-api-url="https://news.smash-inc.co.jp/wp-json/wp/v2/posts">
```

### SSL証明書のエラーが出る場合
1. Xserverサーバーパネルの「SSL設定」
2. 両方のドメイン（`smash-inc.co.jp` と `news.smash-inc.co.jp`）で無料SSL証明書を設定
3. 反映まで最大1時間程度待つ

---

## ✅ 完了チェックリスト

- [ ] `https://smash-inc.co.jp` でトップページが表示される
- [ ] `https://news.smash-inc.co.jp/wp-admin/` でWordPress管理画面にログインできる
- [ ] `https://news.smash-inc.co.jp/wp-json/wp/v2/posts` でJSON取得できる
- [ ] トップページのNewsセクションに記事が表示される
- [ ] 記事カードをクリックして詳細ページが表示される
- [ ] アイキャッチ画像が表示される

---

## 📝 運用方法

### 記事の投稿
1. `https://news.smash-inc.co.jp/wp-admin/` にログイン
2. 「投稿」→「新規追加」
3. タイトル、本文、アイキャッチ画像を設定
4. 「公開」をクリック
5. 数秒後、`smash-inc.co.jp` のNewsセクションに自動反映

### 記事の編集・削除
1. WordPress管理画面の「投稿」→「投稿一覧」
2. 対象記事を編集または削除
3. 変更は即座にメインサイトに反映

---

## 🔐 セキュリティ推奨事項

### WordPress側
- [ ] 管理画面のログインURLを変更（プラグイン「WPS Hide Login」等）
- [ ] 強固なパスワードを設定
- [ ] 定期的なWordPressアップデート
- [ ] 不要なプラグイン・テーマを削除
- [ ] 「WP Admin Restrict」などでIPアドレス制限を検討

### Xserver全般
- [ ] サーバーパネルのパスワードを強固に
- [ ] FTPアカウントの管理
- [ ] 定期的なバックアップ（Xserverの自動バックアップ機能を確認）

---

## 📞 サポート

### Xserver
- サポート: https://www.xserver.ne.jp/support/
- 電話: サーバーパネルで確認
- メール: support@xserver.ne.jp

### その他
- WordPress公式: https://ja.wordpress.org/support/
- このサイトに関する技術的な質問: 開発チームまで

---

作成日: 2026年2月10日
